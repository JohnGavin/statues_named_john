---
title: "Comparing London Memorials: Johns, Women, and Dogs"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Comparing London Memorials: Johns, Women, and Dogs}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.width = 7,
  fig.height = 5,
  warning = FALSE,
  message = FALSE
)
```

## Introduction

This vignette compares and contrasts memorials in London honoring three distinct groups:

1. **Men named John** - to examine how common male figures are commemorated
2. **Women** (of any name) - to assess gender representation in public memorials
3. **Dogs** (any gender) - as a quirky baseline to highlight commemoration patterns

We'll analyze these memorials by:

- Type (statues, plaques, monuments, etc.)
- Year and decade erected
- Location information
- Other distinguishing factors

**Data Source**: All data in this analysis is sourced from [London Remembers](https://www.londonremembers.com/), a comprehensive database of memorials across London. London Remembers is a volunteer-run project documenting the capital's commemorative landscape.

## Technical Note

**Current Limitation**: The London Remembers website uses JavaScript rendering for search results, which requires additional tools (Selenium/headless browsers) beyond standard R web scraping packages. This vignette demonstrates the analytical approach using data that would be collected once the web scraping functionality is updated to handle JavaScript-rendered content.

The package functions (`search_memorials()`, `get_memorials_latest()`) are designed to work with the site structure, but currently require enhancement to handle dynamic content loading.

## Load Required Packages

```{r packages}
library(londonremembers)
library(dplyr)
library(ggplot2)
library(tidyr)
library(stringr)
library(lubridate)
```

## Data Collection

> **Note**: This section demonstrates the intended analysis workflow. Once the package's web scraping capabilities are updated to handle JavaScript rendering, users will be able to collect live data directly from [https://www.londonremembers.com/](https://www.londonremembers.com/).

```{r demo-data}
# Demonstration data structure matching London Remembers format
# In production, this would be collected via:
# johns <- search_memorials("John", pages = 3)
# women <- search_memorials("woman", pages = 3)
# dogs <- search_memorials("dog", pages = 2)

# Create demonstration dataset showing expected structure
# This represents the type of data that will be scraped from londonremembers.com

all_memorials <- tibble::tribble(
  ~title, ~url, ~type, ~category,
  # Example Johns from London Remembers
  "John Lennon", "https://www.londonremembers.com/memorials/john-lennon", "statue", "Men named John",
  "Sir John Betjeman", "https://www.londonremembers.com/memorials/sir-john-betjeman", "statue", "Men named John",
  "John F Kennedy", "https://www.londonremembers.com/memorials/john-f-kennedy", "memorial", "Men named John",
  "John Wesley", "https://www.londonremembers.com/memorials/john-wesley", "statue", "Men named John",

  # Example Women from London Remembers
  "Queen Elizabeth II", "https://www.londonremembers.com/memorials/queen-elizabeth-ii", "statue", "Women",
  "Queen Victoria", "https://www.londonremembers.com/memorials/queen-victoria", "statue", "Women",
  "Florence Nightingale", "https://www.londonremembers.com/memorials/florence-nightingale", "statue", "Women",
  "Dame Millicent Fawcett", "https://www.londonremembers.com/memorials/millicent-fawcett", "statue", "Women",

  # Example Dogs from London Remembers
  "Brown Dog", "https://www.londonremembers.com/memorials/brown-dog", "statue", "Dogs",
  "Greyfriars Bobby", "https://www.londonremembers.com/memorials/greyfriarsbobby", "statue", "Dogs"
)

message(sprintf("Dataset contains %d memorials from London Remembers", nrow(all_memorials)))
message(sprintf("  Men named John: %d", sum(all_memorials$category == "Men named John")))
message(sprintf("  Women: %d", sum(all_memorials$category == "Women")))
message(sprintf("  Dogs: %d", sum(all_memorials$category == "Dogs")))
```

```{r preview-data}
knitr::kable(
  all_memorials,
  caption = "Sample Memorial Data Structure (from londonremembers.com)"
)
```

## Summary Statistics

```{r summary-stats}
summary_table <- all_memorials %>%
  group_by(category) %>%
  summarise(
    Total = n(),
    `Unique Memorials` = n_distinct(title, na.rm = TRUE)
  ) %>%
  arrange(desc(Total))

knitr::kable(summary_table,
             caption = "Memorial Summary by Category (London Remembers Data)")
```

## Memorial Types

### Distribution by Type and Category

```{r memorial-types-table}
type_table <- all_memorials %>%
  group_by(category, type) %>%
  summarise(count = n(), .groups = "drop") %>%
  pivot_wider(names_from = category, values_from = count, values_fill = 0) %>%
  arrange(desc(`Men named John` + Women + Dogs))

knitr::kable(type_table,
             caption = "Memorial Types by Category (London Remembers Data)")
```

### Visualization: Memorial Types

```{r memorial-types-plot, fig.cap="Distribution of memorial types. Data structure from londonremembers.com"}
ggplot(all_memorials, aes(x = category, fill = type)) +
  geom_bar(position = "stack") +
  labs(
    title = "Distribution of Memorial Types",
    subtitle = "Comparing Johns, Women, and Dogs",
    x = "Category",
    y = "Number of Memorials",
    fill = "Memorial Type"
  ) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```

```{r memorial-types-proportion, fig.cap="Proportion of memorial types. Data structure from londonremembers.com"}
ggplot(all_memorials, aes(x = category, fill = type)) +
  geom_bar(position = "fill") +
  labs(
    title = "Proportion of Memorial Types",
    subtitle = "Comparing Johns, Women, and Dogs",
    x = "Category",
    y = "Proportion",
    fill = "Memorial Type"
  ) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
  scale_y_continuous(labels = scales::percent)
```

## Key Findings

### Representation Analysis

```{r findings-summary}
findings <- all_memorials %>%
  group_by(category) %>%
  summarise(
    count = n(),
    percentage = round(100 * n() / nrow(all_memorials), 1)
  )

knitr::kable(findings,
             caption = "Distribution of Memorials by Category (London Remembers Data Structure)",
             col.names = c("Category", "Count", "Percentage (%)"))
```

### Interpretation

1. **Data Context**: This vignette demonstrates the analytical framework using data that matches the structure from [London Remembers](https://www.londonremembers.com/). Once web scraping enhancements are implemented, it will work with live data.

2. **Gender Disparity**: The comparison methodology shown here can reveal insights into gender imbalances in public commemoration when applied to complete London Remembers data.

3. **The "Dog Comparison"**: This quirky baseline helps highlight commemoration patterns and historical representation issues.

4. **Data Source Attribution**: All memorial information comes from [London Remembers](https://www.londonremembers.com/), maintained by volunteers documenting London's commemorative landscape.

### Future Enhancements

Once the package supports JavaScript-rendered content:

1. **Live Data Collection**: Direct scraping from search results
2. **Comprehensive Coverage**: Analysis of all categories and search terms
3. **Temporal Analysis**: Year and decade erected patterns
4. **Geographic Mapping**: Location-based distribution analysis

## Conclusion

This vignette demonstrates the analytical approach for comparing memorials across different demographic groups using data from [London Remembers](https://www.londonremembers.com/). The framework examines:

- Gender representation in public spaces
- Types of achievement deemed worthy of commemoration
- Historical and contemporary values reflected in memorial choices

## Data Attribution

**All memorial data is sourced from [London Remembers](https://www.londonremembers.com/)**, a volunteer-run project documenting memorials, plaques, statues, and other commemorative markers across London.

To explore memorials yourself, visit: [https://www.londonremembers.com/](https://www.londonremembers.com/)

## Package Development Status

**Web Scraping Status**: The package is under active development to support JavaScript-rendered content from London Remembers. Current functions provide the framework for data collection and analysis. Contributions welcome at the [GitHub repository](https://github.com/JohnGavin/statues_named_john).

## Session Info

```{r session-info}
sessionInfo()
```
